# Generate Full Party System

## Context
Create a party-based system where the player controls multiple characters that can stack on the same hex tile. This fundamentally changes the game from a single hero's journey to a tactical party-based RPG where positioning and party composition are key.

## Party Composition

### 1. Party Size
- **Minimum**: 1 character (solo challenge mode)
- **Standard**: 3-4 characters
- **Maximum**: 6 characters
- **Stack Display**: Characters arranged in formation on single hex

### 2. Party Creation
At game start, choose:
- **Pre-made Parties**: Balanced compositions
  - Classic: Fighter, Mage, Cleric, Rogue
  - Magic Heavy: 3 Mages, 1 Tank
  - Physical: 2 Fighters, Archer, Barbarian
  - Defensive: Paladin, 2 Clerics, Tank
- **Custom Party**: Pick each member individually
- **Random Party**: For roguelike experience

### 3. Visual Stacking
On a single hex:
```
Formation Views:
- Diamond: 4 characters in diamond pattern
- Line: Characters in a row (facing direction)
- Circle: Surrounding formation
- Staggered: Slight offset for each character
- Dynamic: Changes based on action

Camera angles:
- Isometric: See all characters clearly
- Top-down: Strategic view
- Cinematic: Focuses on acting character
```

## Movement Mechanics

### 1. Party Movement Modes

#### Stack Mode (Default)
- Entire party moves as one unit
- Movement = slowest member's speed
- Single hex occupied
- Quick to reposition
- Vulnerable to AoE attacks

#### Spread Mode
- Each character on separate hex
- Individual movement pools
- Tactical positioning
- Resistant to AoE
- Takes time to set up

#### Formation Mode
- Maintain relative positions
- Move as group but spread out
- Preset formations (line, wedge, square)
- One-click formation changes

### 2. Movement Costs
```
Stack Mode:
- Base cost: Slowest member's AP
- Difficult terrain: +1 AP for whole stack
- Bonus: "Marching Order" skill reduces cost

Spread Mode:
- Each character uses own AP
- Can move independently
- Can end turn at different positions

Switching Modes:
- Stack → Spread: 1 AP per character
- Spread → Stack: Free if adjacent
- Formation change: 1 AP for party
```

## Combat Adaptations

### 1. Stack Combat

#### Attacking from Stack
- Front character attacks normally
- Back row can only use ranged/magic
- Special combo attacks when stacked
- Formation affects available actions

#### Defending as Stack
- Damage can hit multiple characters
- Front character takes most hits
- "Guardian" stance protects others
- AoE attacks hit all in stack

#### Stack-Specific Abilities
- **Shield Wall**: All shields combine for mega-defense
- **Spell Volley**: All mages cast together
- **Combined Strike**: Physical attackers combo
- **Rally Point**: Healing affects whole stack

### 2. Spread Combat

#### Tactical Advantages
- Flanking bonuses
- Surround enemies
- Control more hexes
- Split enemy attention

#### Coordination Mechanics
- **Combo Points**: Build up by positioning
- **Synergy Attacks**: Adjacent allies enable
- **Cover Fire**: Protect moving allies
- **Zone Control**: Overlap threat ranges

### 3. Dynamic Switching
- Can switch modes during combat
- Costs AP but enables tactics
- Emergency Stack: Defensive formation
- Scatter: Avoid incoming AoE

## Party Management

### 1. Character Roles

#### Primary Roles
- **Tank**: Blocks for stacked allies
- **DPS**: Maximum damage output
- **Healer**: Keeps party alive
- **Controller**: Buffs/debuffs/positioning
- **Scout**: Vision and trap detection

#### Stack Positions
When stacked, position matters:
1. **Front**: Takes most attacks, melee only
2. **Middle**: Protected, any attack type
3. **Back**: Safest, ranged/magic preferred
4. **Center**: Buffing/healing position

### 2. Party Synergies

#### Class Combinations
```
Fighter + Fighter = "Brothers in Arms" (+defense)
Mage + Mage = "Arcane Resonance" (+spell power)
Rogue + Archer = "Precision Team" (+crit)
Healer + Tank = "Divine Protection" (+sustain)
Mixed Classes = "Diverse Tactics" (+flexibility)
```

#### Relationship System
- Characters build bonds over time
- Shared combats increase synergy
- Personal quests for party members
- Banter during exploration
- Romance between party members

### 3. Equipment Sharing
- Inventory shared by party
- Can trade items freely
- "Quick swap" during combat (costs AP)
- Set bonuses work across party
- Resource management important

## Exploration Adaptations

### 1. Party Skills
Different compositions enable:
- **All Fighters**: Bash through obstacles
- **Has Rogue**: Find secret passages
- **Has Mage**: Detect magical areas
- **Has Ranger**: Better outdoor navigation
- **Diverse**: Access all content

### 2. Vision and Detection
- Stack Mode: Shared vision radius
- Spread Mode: Individual vision combines
- Scout ahead with one character
- Leave party members as lookouts

### 3. Camp System
- Set up camp to rest
- Assign camp roles:
  - Cook: Better rest bonuses
  - Guard: Avoid ambushes
  - Hunter: Gather food
  - Storyteller: Build relationships
- Camp conversations develop characters

## Strategic Considerations

### 1. Party Builds

#### Specialized Parties
- **Glass Cannon**: All DPS, no tank
- **Turtle**: Maximum defense
- **Balanced**: Traditional RPG party
- **Swarm**: 6 light fighters
- **Spell Squad**: Magic focus

#### Adaptation Strategies
- Change formation for different enemies
- Stack for single targets
- Spread for groups
- Adjust based on terrain

### 2. Resource Management
- Healing distributed across party
- Mana/stamina per character
- Consumables limited by inventory
- Rest affects whole party

### 3. Death and Revival
- Characters can be downed (0 HP)
- Other party members can revive
- Permanent death optional
- Town resurrection expensive
- Soul bond items prevent death

## Party Progression

### 1. Shared Experience
- All party members gain XP
- Active participants get bonus
- Bench warmers get reduced XP
- Can focus-level specific characters

### 2. Party Achievements
- "Perfect Victory": No damage taken
- "Coordination": All hit same target
- "Last Stand": Win with one alive
- "Diverse Victory": All roles contribute

### 3. Party Reputation
- Famous parties get discounts
- Infamous parties face higher prices
- Heroic deeds remembered
- Party name becomes legend

Generate complete party system with:
- Stack rendering on hex tiles
- Formation AI and pathfinding
- Multi-character combat flow
- Relationship tracking
- Party inventory management
- Balanced encounter design for parties
