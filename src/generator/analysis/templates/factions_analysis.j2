You are an expert Python developer creating comprehensive data extraction models for a D&D faction/political system with explicit UUID connections.

## GOAL: Discover ALL extractable data for factions with spatial and UUID tracking

**Context**: The uploaded files are sample faction data. Analyze them thoroughly and create Pydantic models that capture EVERYTHING you find.

**Primary Focus**: Political organizations, territories, and relationships with explicit UUID connection tracking.

## CRITICAL REQUIREMENTS

**UUID Connection Tracking**:
- **EVERY UUID field** must be explicitly identified and documented
- **Connection fields** (faction_uuid, settlement_uuid, region_uuid, etc.) must be surfaced
- **Entity relationships** must be made explicit through UUID references

**Absolute Imports Only**:
- **NO wildcard imports** (no `from x import *`)
- **Explicit imports** only (e.g., `from generator.processors.models.settlements import SettlementModel`)
- **Full import paths** for all dependencies

## Analysis Approach

Examine the uploaded files and identify:
1. **Spatial data** - Faction territory locations, stronghold coordinates, influence zones
2. **UUID patterns** - What UUID fields connect to other entities?
3. **Political systems** - Faction structure, hierarchy, leadership
4. **Territorial systems** - Controlled regions, strongholds, influence zones
5. **Relationship systems** - Allies, enemies, neutral parties, conflicts
6. **Membership systems** - Members, recruitment, loyalty, defection
7. **Resource systems** - Wealth, assets, capabilities, limitations
8. **Activity systems** - Goals, methods, operations, conspiracies

## Key Patterns to Look For

**Spatial Coordinate Patterns**:
- **Hex coordinates**: Extract "Hex W4S51" from `<div hidden id="doc-title">`
- **Map coordinates**: Extract hex, x, y, zoom from `<a class="map-coords" hex="..." x="..." y="..." zoom="...">`
- **Breadcrumb paths**: Region/settlement/faction links in breadcrumbs span
- **Territory references**: Extract controlled regions and stronghold locations

**UUID and Cross-Reference Patterns**:
- **Entity UUID**: Extract from filename (entity_{UUID}.html)
- **Faction UUIDs**: From breadcrumb links like `/sandbox/nTR8nJOW/faction/42LTyPyh`
- **Region UUIDs**: From breadcrumb links like `/sandbox/nTR8nJOW/region/MOIzA5C3`
- **Settlement UUIDs**: From location links like `/sandbox/nTR8nJOW/location/YVOe8HfG`
- **NPC UUIDs**: From NPC anchor elements `<a class="npc-anchor" name="...">`
- **Member UUIDs**: From faction member references and spoiler tags

**From HTML with BeautifulSoup**:
- **Hidden doc-title**: `soup.find('div', {'id': 'doc-title'})` for spatial context
- **Map coords anchor**: `soup.find('a', class_='map-coords')` for spatial data  
- **Breadcrumbs**: Extract all `/sandbox/nTR8nJOW/{type}/{uuid}` pattern links
- **Faction links**: `soup.find_all('a', href=re.compile(r'/faction/'))`
- **Location links**: `soup.find_all('a', href=re.compile(r'/location/'))`
- **Region links**: `soup.find_all('a', href=re.compile(r'/region/'))`
- **NPC anchors**: `soup.find_all('a', class_='npc-anchor')` for character UUIDs
- **Spoiler sections**: Hidden faction relationships and member information
- **Faction overview descriptions** and goals
- **Territory lists and regional control**
- **Leadership information and key members**
- **Political relationship webs** (allies/enemies)
- **Resource descriptions and capabilities**
- **Activity patterns and methods**
- **Member lists and notable individuals**

## Output Requirements

Generate comprehensive Pydantic models with:
- **Explicit UUID Documentation**: Comment every UUID field with what entity it connects to
- **Connection Field Mapping**: List all fields that reference other entity UUIDs
- **Absolute imports only**: Full import paths, no wildcards
- **Discovery-driven structure** - Model what you actually find
- **Political system integration** - Complete faction relationships
- **Territorial data capture** - Regional control and influence
- **BeautifulSoup extraction methods** - Include specific parsing logic for UUID extraction
- **Modern Python types**: str, int, list[str], dict[str, Any], str | None

**Required Code Structure**:
```python
# Absolute imports only - NO wildcards
from typing import Any
import re
from pydantic import BaseModel, Field
from bs4 import BeautifulSoup

class FactionEntity(BaseModel):
    """Individual faction entity (member, stronghold, territory)."""
    # Entity identification
    entity_uuid: str = Field(..., description="UUID from filename (entity_{UUID}.html)")
    
    # Spatial coordinates and location
    hex_coordinate: str | None = Field(None, description="Hex coordinate like 'W4S51' from doc-title")
    map_hex_id: str | None = Field(None, description="Map hex ID from map-coords anchor")
    map_x: float | None = Field(None, description="Map X coordinate")
    map_y: float | None = Field(None, description="Map Y coordinate")
    
    # Entity connections via UUIDs extracted from links
    faction_uuid: str | None = Field(None, description="UUID of parent faction from breadcrumbs")
    region_uuid: str | None = Field(None, description="UUID of region from breadcrumbs")
    settlement_uuids: list[str] = Field(default_factory=list, description="UUIDs of settlements referenced")
    allied_faction_uuids: list[str] = Field(default_factory=list, description="UUIDs of allied factions")
    enemy_faction_uuids: list[str] = Field(default_factory=list, description="UUIDs of enemy factions")
    member_npc_uuids: list[str] = Field(default_factory=list, description="UUIDs of faction member NPCs")
    
    @classmethod  
    def extract_from_html(cls, html_content: str, filename: str) -> "FactionEntity":
        """Extract all coordinate and UUID data from HTML using BeautifulSoup."""
        soup = BeautifulSoup(html_content, 'html.parser')
        
        # Extract entity UUID from filename
        entity_uuid = filename.replace('entity_', '').replace('.html', '')
        
        # Extract hex coordinate from hidden doc-title
        doc_title = soup.find('div', {'id': 'doc-title'})
        hex_coordinate = None
        if doc_title and 'Hex ' in doc_title.text:
            # Extract "W4S51" from "Hex W4S51 in Javelin Plains"
            match = re.search(r'Hex ([A-Z]\d+[A-Z]\d+)', doc_title.text)
            hex_coordinate = match.group(1) if match else None
            
        # Extract map coordinates from map-coords anchor
        map_coords = soup.find('a', class_='map-coords')
        map_hex_id = map_coords.get('hex') if map_coords else None
        map_x = float(map_coords.get('x', 0)) if map_coords and map_coords.get('x') else None
        map_y = float(map_coords.get('y', 0)) if map_coords and map_coords.get('y') else None
        
        # Extract UUIDs from various link patterns
        faction_uuid = cls._extract_uuid_from_links(soup, '/faction/')
        region_uuid = cls._extract_uuid_from_links(soup, '/region/')
        settlement_uuids = cls._extract_all_uuids_from_links(soup, '/location/')
        
        # Extract faction relationships from spoiler tags and links
        allied_faction_uuids = cls._extract_faction_relationships(soup, 'allied')
        enemy_faction_uuids = cls._extract_faction_relationships(soup, 'enemy')
        member_npc_uuids = [anchor.get('name') for anchor in soup.find_all('a', class_='npc-anchor') if anchor.get('name')]
        
        return cls(
            entity_uuid=entity_uuid,
            hex_coordinate=hex_coordinate,
            map_hex_id=map_hex_id,
            map_x=map_x,
            map_y=map_y,
            faction_uuid=faction_uuid,
            region_uuid=region_uuid,
            settlement_uuids=settlement_uuids,
            allied_faction_uuids=allied_faction_uuids,
            enemy_faction_uuids=enemy_faction_uuids,
            member_npc_uuids=member_npc_uuids
        )
        
    @classmethod
    def _extract_faction_relationships(cls, soup: BeautifulSoup, relationship_type: str) -> list[str]:
        """Extract faction relationships from content and spoiler tags."""
        # This would need specific implementation based on actual faction relationship patterns
        faction_uuids = []
        faction_links = soup.find_all('a', href=re.compile(r'/faction/'))
        for link in faction_links:
            match = re.search(r'/faction/([^/]+)', link['href'])
            if match:
                faction_uuids.append(match.group(1))
        return list(set(faction_uuids))  # Remove duplicates
        
    @classmethod
    def extract_uuid_connections(cls) -> dict[str, str]:
        """Return mapping of UUID fields to their entity types."""
        return {
            "entity_uuid": "faction_entity",
            "faction_uuid": "faction",
            "region_uuid": "region", 
            "settlement_uuids": "settlement",
            "allied_faction_uuids": "faction",
            "enemy_faction_uuids": "faction",
            "member_npc_uuids": "npc"
        }
```

**Focus**: Extract ALL spatial coordinates, UUID connections, and political relationships systematically for perfect container integration.
